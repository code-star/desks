(this["webpackJsonpdesks-client"]=this["webpackJsonpdesks-client"]||[]).push([[0],{136:function(e,t,n){},137:function(e,t,n){},151:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(49),s=n.n(r),i=(n(136),n(137),n(28)),o=n.n(i),u=n(43),d=n(8),j=n(215),b=n(216),l=n(211),f=n(78),O=n(219),h=n(221),p=n(222),x=n(210),k=n(208),v=n(155),m=n(209),g=n(1),w=function(e){var t=e.title,n=e.type,a=Object(c.useContext)(F),r=Object(d.a)(a.startTime,2),s=r[0],i=r[1],o=Object(c.useContext)(F),u=Object(d.a)(o.endTime,2),j=u[0],b=u[1];return Object(g.jsx)(O.a,{children:Object(g.jsxs)(h.a,{children:[Object(g.jsx)(p.a,{variant:"body2",children:t}),Object(g.jsx)(v.b,{dateAdapter:k.a,children:Object(g.jsx)(m.a,{value:t.includes("Start")?s:j,onChange:function(e){e&&("Start"===n&&i(e),"End"===n&&b(e))},renderInput:function(e){return Object(g.jsx)(x.a,Object(f.a)({},e))}})})]})})},y=n(214),C=function(){var e=Object(c.useContext)(F),t=Object(d.a)(e.date,2),n=t[0],a=t[1];return Object(g.jsx)(v.b,{dateAdapter:k.a,children:Object(g.jsx)(y.a,{orientation:"portrait",openTo:"day",value:n,onChange:function(e){e&&a(e)},renderInput:function(e){return Object(g.jsx)(x.a,Object(f.a)({},e))}})})},_=n(224),S=n(206),T=function(e){var t=e.desk,n=Object(c.useContext)(F),a=Object(d.a)(n.desk,2),r=a[0],s=a[1];return Object(g.jsx)(S.a,{selected:r===t.desk_id,onClick:function(e){return function(e,t){s(t)}(0,t.desk_id)},children:t.desk_id},t.desk_id)};function z(e,t,n){return e>=t&&e<=n}function D(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes()).getTime()/1e3}var I=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(c.useContext)(F),s=Object(d.a)(r.startTime,1)[0],i=Object(c.useContext)(F),j=Object(d.a)(i.endTime,1)[0],b=Object(c.useContext)(F),l=Object(d.a)(b.date,1)[0];return Object(c.useEffect)((function(){var e=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,c,r,i,u,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/bookinglist"));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,c=n.bookingList,r=c.filter((function(e){var t=D(l,s),n=D(l,j),c=z(e.start_time,t,n),a=z(e.end_time,t,n);return c||a})),e.next=10,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/desk/list"));case 10:return i=e.sent,e.next=13,i.json();case 13:u=e.sent,d=u.deskList.filter((function(e){return!r.find((function(t){return t.booked_desk===e.desk_id}))})),a(d);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[j,s,l]),Object(g.jsx)(_.a,{style:{maxHeight:1e3,overflow:"auto"},children:n.map((function(e){return Object(g.jsx)(T,{desk:e})}))})},E=n.p+"static/media/plattegrond_ordinaB2.007c5b7b.jpg",F=a.a.createContext(null),H=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],r=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/book"),{method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({booking_id:"booking ".concat(z,".").concat(Date.now()),start_time:D(y,f),end_time:D(y,x),booked_desk:z})});case 2:return t=e.sent,e.next=5,t.json();case 5:e.sent.booking&&a(!0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=Object(c.useState)(new Date),i=Object(d.a)(s,2),f=i[0],O=i[1],h=Object(c.useState)(new Date),p=Object(d.a)(h,2),x=p[0],k=p[1],v=Object(c.useState)(new Date),m=Object(d.a)(v,2),y=m[0],_=m[1],S=Object(c.useState)(""),T=Object(d.a)(S,2),z=T[0],H=T[1],L={startTime:[f,O],endTime:[x,k],date:[y,_],desk:[z,H]};return Object(g.jsx)(F.Provider,{value:L,children:Object(g.jsxs)("div",{children:[Object(g.jsxs)(j.a,{container:!0,spacing:2,children:[Object(g.jsxs)(j.a,{item:!0,xs:8,children:[Object(g.jsx)("h3",{children:"layout picture"}),Object(g.jsx)("img",{src:E,alt:"layout img",width:1500,height:600}),Object(g.jsxs)(j.a,{container:!0,spacing:2,children:[Object(g.jsx)(j.a,{item:!0,xs:6,children:Object(g.jsx)(C,{})}),Object(g.jsxs)(j.a,{item:!0,xs:6,children:[Object(g.jsx)(w,{title:"Start time",type:"Start"}),Object(g.jsx)(w,{title:"End time",type:"End"})]})]})]}),Object(g.jsxs)(j.a,{item:!0,xs:4,children:[Object(g.jsx)("h3",{children:"list available desks"}),Object(g.jsx)(I,{}),Object(g.jsx)(b.a,{variant:"contained",color:"secondary",onClick:r,children:"Book"})]})]}),Object(g.jsx)(l.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:n,autoHideDuration:6e3,onClose:function(){a(!1)},message:"Your booking for desk ".concat(z," was succesful")})]})})},L=n(207),P=n(213),A=function(e){var t=e.desk;return Object(g.jsx)(P.a,{children:t.desk_id},t.desk_id)},B=function(e){return z(Date.now()/1e3,e.start_time,e.end_time)},J=function(e){var t=e.deskId,n=Object(c.useState)([]),a=Object(d.a)(n,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(u.a)(o.a.mark((function e(){var n,c,a,r,i,u,d,j,b,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/desk/list"));case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,a=c.deskList,e.next=9,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/bookinglist"));case 9:return r=e.sent,e.next=12,r.json();case 12:i=e.sent,u=i.bookingList,d=a.findIndex((function(e){return e.desk_id===t})),j=function(e){return a.find((function(t){return t.desk_id===e.booked_desk}))},(b=u.filter(B).map(j)).find((function(e){return(null===e||void 0===e?void 0:e.desk_id)===t}))&&(l=a.filter((function(e,t){var n=b.find((function(t){return(null===t||void 0===t?void 0:t.desk_id)===e.desk_id})),c=d-t;return!(d===t)&&(c>=-2&&c<=2)&&!n})),s(l));case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(g.jsx)(_.a,{style:{maxHeight:200,overflow:"auto"},children:r.map((function(e){return Object(g.jsx)(A,{desk:e})}))})},N=function(){var e=document.location.search.substr(1),t=Object(c.useState)("free"),n=Object(d.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(!1),i=Object(d.a)(s,2),j=i[0],f=i[1];Object(c.useEffect)((function(){var t=function(){var t=Object(u.a)(o.a.mark((function t(){var n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/desk/").concat(e));case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,r(c.deskState);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]);var O=function(){var t=Object(u.a)(o.a.mark((function t(){var n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/desk/").concat(e),{method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({deskState:a,deskId:e})});case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,r(c.deskState),f(!0);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"CheckinPage",children:[Object(g.jsxs)(L.a,{spacing:2,children:[Object(g.jsx)(b.a,{variant:"contained",color:"secondary",disabled:"unavailable"===a,onClick:O,children:"check in/ uit"}),Object(g.jsx)(J,{deskId:e})]}),Object(g.jsx)(l.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:j,autoHideDuration:6e3,onClose:function(){f(!1)},message:"free"===a?"uitgechecked":"ingechecked"})]})},M=n(225),U=n(226),Y=n(223),G=n(112),q=n.n(G),K=function(){return Object(g.jsx)(M.a,{position:"static",children:Object(g.jsxs)(U.a,{variant:"dense",children:[Object(g.jsx)(p.a,{variant:"h6",color:"inherit",component:"div",sx:{flexGrow:1},children:"Username"}),Object(g.jsx)(Y.a,{size:"large",color:"inherit",children:Object(g.jsx)(q.a,{})})]})})},Q=n(19);var R=function(){return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(K,{}),Object(g.jsx)(Q.a,{path:"/desks/book",component:H}),Object(g.jsx)(Q.a,{path:"/desks/checkin",component:N})]})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,227)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))},W=n(97);s.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(W.a,{children:Object(g.jsx)(R,{})})}),document.getElementById("root")),V()}},[[151,1,2]]]);
//# sourceMappingURL=main.2d9a9a8f.chunk.js.map