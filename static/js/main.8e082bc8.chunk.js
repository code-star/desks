(this["webpackJsonpdesks-client"]=this["webpackJsonpdesks-client"]||[]).push([[0],{158:function(e,t,n){},166:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(55),c=n.n(r),i=(n(158),n(15)),o=n.n(i),j=n(20),d=n(253),u=n(7),b=n(255),l=n(241),x=n(256),h=n(65),O=n.n(h),f=n(262),p=n(263),m=n(248),k=n(245),v=n(264),g=n(238),w=n(102),y=n(265),S=n(249),C=n(231),_=n(239),T=n(232),D=n(88),N=n(243),z=n(236),I=n(175),L=n(237),P=s.a.createContext(null),U=n(0),B=function(e){var t=e.title,n=e.type,s=Object(a.useContext)(P),r=Object(u.a)(s.startTime,2),c=r[0],i=r[1],o=Object(a.useContext)(P),j=Object(u.a)(o.endTime,2),d=j[0],l=j[1];return Object(U.jsxs)(b.a,{children:[Object(U.jsx)(w.a,{variant:"body1",gutterBottom:!0,children:t}),Object(U.jsx)(I.b,{dateAdapter:z.a,children:Object(U.jsx)(L.a,{value:"Start"===n?c:d,onChange:function(e){e&&("Start"===n&&i(e),"End"===n&&l(e))},renderInput:function(e){return Object(U.jsx)(N.a,Object(D.a)({},e))}})})]})};function H(e,t,n){return e>=t&&e<=n}function E(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes()).getTime()/1e3}var A=function(e,t){return E(e,t)-Date.now()/1e3<=0},F=function(e){return""===e},J=function(e,t,n){var a=E(e,t);return E(e,n)-a<=0},M=function(e){return e?new Date(1e3*e).toLocaleString():"no time found"},R=function(){var e=Object(a.useContext)(P),t=Object(u.a)(e.date,1)[0],n=Object(u.a)(e.startTime,1)[0],s=Object(u.a)(e.endTime,1)[0];return Object(U.jsxs)(C.a,{spacing:2,children:[Object(U.jsx)(B,{title:"Please select the start time for the booking",type:"Start"}),A(t,n)?Object(U.jsx)(_.a,{severity:"warning",children:"Check if the time has passed"}):null,Object(U.jsx)(T.a,{}),Object(U.jsx)(B,{title:"Please select the end time for the booking",type:"End"}),J(t,n,s)?Object(U.jsx)(_.a,{severity:"warning",children:"The end time is earlier than the start time"}):null]})},V=n(247),Y=function(e){return E(e,e)<Date.now()/1e3-86400},q=function(){var e=Object(a.useContext)(P),t=Object(u.a)(e.date,2),n=t[0],s=t[1];return Object(U.jsx)(I.b,{dateAdapter:z.a,children:Object(U.jsx)(V.a,{orientation:"portrait",displayStaticWrapperAs:"desktop",openTo:"day",value:n,shouldDisableDate:Y,onChange:function(e){e&&s(e)},renderInput:function(e){return Object(U.jsx)(N.a,Object(D.a)({},e))}})})},W=function(){return Object(U.jsxs)(b.a,{children:[Object(U.jsx)(w.a,{variant:"body1",gutterBottom:!0,children:"Please select the date for the booking"}),Object(U.jsx)(q,{})]})},G=n(242),K=n(260),Q=n(244),X=n(240),Z=n(252),$=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],s=t[1],r=Object(a.useContext)(P),c=Object(u.a)(r.desk,2),i=c[0],d=c[1],b=Object(a.useContext)(P),l=Object(u.a)(b.startTime,1)[0],x=Object(a.useContext)(P),h=Object(u.a)(x.endTime,1)[0],O=Object(a.useContext)(P),f=Object(u.a)(O.date,1)[0],p=Object(a.useContext)(P),m=Object(u.a)(p.bookingSucces,1)[0];return Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(o.a.mark((function e(){var t,n,a,r,c,i,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/bookinglist"));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,a=n.bookingList,r=a.filter((function(e){var t=E(f,l),n=E(f,h),a=H(e.start_time,t,n),s=H(e.end_time,t,n);return a||s})),e.next=10,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/desk/list"));case 10:return c=e.sent,e.next=13,c.json();case 13:i=e.sent,j=i.deskList.filter((function(e){return!r.find((function(t){return t.booked_desk===e.desk_id}))})),s(j);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[m,h,l,f]),Object(U.jsxs)(K.a,{sx:{m:1,minWidth:120},children:[Object(U.jsx)(Q.a,{children:"Desk"}),Object(U.jsx)(X.a,{value:i,label:"Desk",onChange:function(e){d(e.target.value)},children:n.map((function(e){return Object(U.jsx)(Z.a,{value:e.desk_id,children:e.desk_id},e.desk_id)}))})]})},ee=n.p+"static/media/floor_plan_Ordina_B2.c52b3cd2.jpg",te=(n(166),function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],s=t[1],r=Object(a.useContext)(P),c=Object(u.a)(r.desk,1)[0];return Object(U.jsxs)("div",{children:[Object(U.jsxs)(m.a,{container:!0,spacing:1,children:[Object(U.jsxs)(m.a,{item:!0,xs:12,md:4,children:[Object(U.jsx)(w.a,{variant:"body1",gutterBottom:!0,children:"Please select one of the available desks:"}),Object(U.jsx)($,{}),F(c)?Object(U.jsx)(_.a,{severity:"warning",children:"There is no desk selected"}):""]}),Object(U.jsxs)(m.a,{item:!0,xs:12,md:8,children:[Object(U.jsx)("img",{className:"deskstep-image",onClick:function(){return s(!0)},src:ee,alt:"Layout"}),Object(U.jsx)(w.a,{variant:"caption",children:"Click image to enlarge"})]})]}),Object(U.jsx)(G.a,{open:n,onClose:function(){return s(!1)},children:Object(U.jsx)("img",{className:"deskstep-modal-content",alt:"zoomedLayout",src:ee})})]})}),ne=n(22),ae="/desks/booking",se="/desks/checkin/",re="/desks/user",ce="/desks/login",ie="/desks/register",oe="/desks/admin",je=function(){var e=Object(ne.g)(),t=[Object(U.jsx)(W,{}),Object(U.jsx)(R,{}),Object(U.jsx)(te,{})],n=["Select booking date","Select booking time","Select desk"],s=Object(a.useContext)(P),r=Object(u.a)(s.activeStep,2),c=r[0],i=r[1],d=Object(u.a)(s.date,1)[0],b=Object(u.a)(s.startTime,1)[0],l=Object(u.a)(s.endTime,1)[0],x=Object(u.a)(s.desk,2),h=x[0],O=x[1],C=Object(u.a)(s.bookingSucces,2)[1],_=Object(u.a)(s.prevSelectedDesk,2)[1],T=function(){var t=Object(j.a)(o.a.mark((function t(){var n,a,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=sessionStorage.getItem("activeUser"))){t.next=11;break}return a=JSON.parse(n),t.next=5,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/book"),{method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({booking_id:"booking ".concat(h,".").concat(Date.now()),start_time:E(d,b),end_time:E(d,l),booked_desk:h,user_name:a.name})});case 5:return s=t.sent,t.next=8,s.json();case 8:t.sent.booking&&(C(!0),_(h),O("")),e.push(re);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),D=function(){return N&&(F(h)||J(d,b,l)||A(d,b))},N=c===n.length-1,z=function(e){return 1===e&&A(d,b)||1===e&&J(d,b,l)||2===e&&F(h)};return Object(U.jsxs)(f.a,{elevation:6,className:"basecard",sx:{width:{xs:"100%",md:"900px"}},children:[Object(U.jsx)(p.a,{sx:{minHeight:{xs:"calc(100vh - 120px)",md:"580px"}},children:Object(U.jsxs)(m.a,{container:!0,spacing:5,children:[Object(U.jsx)(m.a,{item:!0,xs:6,md:12,children:Object(U.jsx)(k.a,{nonLinear:!0,activeStep:c,children:n.map((function(e,t){return Object(U.jsx)(v.a,{children:Object(U.jsxs)(g.a,{onClick:function(){i(t)},children:[Object(U.jsx)(w.a,{variant:"body1",children:e}),z(t)?Object(U.jsx)(w.a,{variant:"caption",color:"error",children:"Missing/ wrong information"}):null]})},e)}))})}),Object(U.jsx)(m.a,{item:!0,xs:12,children:t[c]}),Object(U.jsx)(m.a,{item:!0,xs:12})]})}),Object(U.jsxs)(y.a,{sx:{justifyContent:"flex-end"},children:[Object(U.jsx)(S.a,{disabled:0===c,onClick:function(){i(c-1)},children:"Back"}),N?Object(U.jsx)(S.a,{variant:"contained",onClick:T,disabled:D(),color:"secondary",children:"Book"}):Object(U.jsx)(S.a,{variant:"contained",onClick:function(){i(c+1)},disabled:D(),children:"Next"})]})]})},de=function(){var e=new Date;e.setHours(9,0,0,0);var t=new Date;t.setHours(17,0,0,0);var n=Object(a.useState)(""),s=Object(u.a)(n,2),r=s[0],c=s[1],i=Object(a.useState)(0),o=Object(u.a)(i,2),j=o[0],d=o[1],h=Object(a.useState)(!1),f=Object(u.a)(h,2),p=f[0],m=f[1],k=Object(a.useState)(e),v=Object(u.a)(k,2),g=v[0],w=v[1],y=Object(a.useState)(t),S=Object(u.a)(y,2),C=S[0],_=S[1],T=Object(a.useState)(new Date(Date.now()+864e5)),D=Object(u.a)(T,2),N=D[0],z=D[1],I=Object(a.useState)(""),L=Object(u.a)(I,2),B={startTime:[g,w],endTime:[C,_],date:[N,z],desk:[L[0],L[1]],activeStep:[j,d],bookingSucces:[p,m],prevSelectedDesk:[r,c]};return Object(U.jsx)(P.Provider,{value:B,children:Object(U.jsxs)(b.a,{sx:{p:{xs:1,md:3},pt:{xs:3,md:3}},children:[Object(U.jsx)(je,{}),Object(U.jsx)(l.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:p,action:Object(U.jsx)(x.a,{onClick:function(){m(!1)},children:Object(U.jsx)(O.a,{color:"primary"})}),autoHideDuration:6e3,onClose:function(){m(!1)},message:"Your booking for desk ".concat(r," was successful")})]})})},ue=n(266),be=n(261),le=n(246),xe=function(e){var t=e.desk;return Object(U.jsx)(le.a,{children:t.desk_id})},he=18e5,Oe=function(e){return H(Date.now()/1e3,e.start_time-he,e.end_time)},fe=function(e){var t=e.deskId,n=Object(a.useState)([]),s=Object(u.a)(n,2),r=s[0],c=s[1],i=Object(a.useContext)(P),d=Object(u.a)(i.isBookedByUser,2),b=d[0],l=d[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(o.a.mark((function e(){var n,a,s,r,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=sessionStorage.getItem("activeUser"))){e.next=15;break}return a=JSON.parse(n),e.next=5,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/user/list/").concat(a.name));case 5:return s=e.sent,e.next=8,s.json();case 8:if(r=e.sent,c=r.userDeskList,!(i=c.find((function(e){return e.booked_desk===t})))){e.next=14;break}return l(H(i.start_time,Date.now()/1e3-he,Date.now()/1e3+he)),e.abrupt("return");case 14:l(!1);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e();var n=function(){var e=Object(j.a)(o.a.mark((function e(){var n,a,s,r,i,j,d,u,b,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/desk/list"));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,s=a.deskList,e.next=9,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/bookinglist"));case 9:return r=e.sent,e.next=12,r.json();case 12:i=e.sent,j=i.bookingList,d=s.findIndex((function(e){return e.desk_id===t})),u=function(e){return s.find((function(t){return t.desk_id===e.booked_desk}))},(b=j.filter(Oe).map(u)).find((function(e){return(null===e||void 0===e?void 0:e.desk_id)===t}))&&(l=s.filter((function(e,t){var n=b.find((function(t){return(null===t||void 0===t?void 0:t.desk_id)===e.desk_id})),a=d-t;return!(d===t)&&(a>=-2&&a<=2)&&!n})),c(l));case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n()}),[t,l]),Object(U.jsx)(U.Fragment,{children:r.length<=0||b?"":Object(U.jsxs)(C.a,{children:[Object(U.jsx)(w.a,{children:"This desk is not available, but these are:"}),Object(U.jsx)(be.a,{style:{maxHeight:200,overflow:"auto"},children:r.map((function(e){return Object(U.jsx)(xe,{desk:e},e.desk_id)}))})]})})},pe=function(){var e=document.location.search.substr(1),t=Object(a.useState)("free"),n=Object(u.a)(t,2),s=n[0],r=n[1],c=Object(a.useState)(!1),i=Object(u.a)(c,2),d=i[0],h=i[1],m=Object(a.useState)(!1),k=Object(u.a)(m,2),v=k[0],g=k[1];Object(a.useEffect)((function(){var t=function(){var t=Object(j.a)(o.a.mark((function t(){var n,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/desk/").concat(e));case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,r(a.deskState);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]);var w=function(){var t=Object(j.a)(o.a.mark((function t(){var n,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/desk/").concat(e),{method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({deskState:s,deskId:e})});case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,r(a.deskState),h(!0);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y={isBookedByUser:[v,g]};return Object(U.jsx)(P.Provider,{value:y,children:Object(U.jsxs)(b.a,{sx:{p:{xs:1,md:3},pt:{xs:3,md:3}},children:[Object(U.jsxs)(f.a,{elevation:6,className:"basecard",sx:{width:{xs:"100%",md:"900px"}},children:[Object(U.jsx)(ue.a,{title:"Desk ".concat(e)}),Object(U.jsx)(p.a,{children:Object(U.jsxs)(C.a,{spacing:2,children:[Object(U.jsx)(S.a,{variant:"contained",sx:{width:"200px"},color:"secondary",disabled:"unavailable"===s||!v,onClick:w,children:"free"===s?"Check in":"Check out"}),Object(U.jsx)(T.a,{}),Object(U.jsx)(fe,{deskId:e})]})})]}),Object(U.jsx)(l.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:d,autoHideDuration:6e3,onClose:function(){h(!1)},action:Object(U.jsx)(x.a,{onClick:function(){return h(!1)},children:Object(U.jsx)(O.a,{color:"primary"})}),message:"free"===s?"checked out":"checked in"})]})})},me=function(){window.Notification.requestPermission();var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(""),c=Object(u.a)(r,2),i=c[0],d=c[1],h=Object(a.useState)(""),m=Object(u.a)(h,2),k=m[0],v=m[1],g=function(){var e=Object(j.a)(o.a.mark((function e(){var t,n,a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/user/").concat(i,"/").concat(k));case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,!n.isValid){e.next=15;break}return a=n.userName,r=n.role,c='{"name": "'.concat(a,'", "role": "').concat(r,'"}'),sessionStorage.setItem("activeUser",c),location.reload(),console.log("test1"),e.abrupt("return");case 15:s(!0);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(U.jsxs)(b.a,{sx:{p:{xs:1,md:3},pt:{xs:3,md:3}},children:[Object(U.jsxs)(f.a,{elevation:6,className:"basecard",sx:{width:{xs:"100%",md:"900px"}},children:[Object(U.jsx)(ue.a,{title:"Sign in",sx:{textAlign:"center"}}),Object(U.jsx)(p.a,{children:Object(U.jsxs)(C.a,{alignItems:"center",spacing:4,children:[Object(U.jsx)(N.a,{label:"Email address",onChange:function(e){return d(e.target.value)},sx:{width:{xs:"90%",md:"25rem"}}}),Object(U.jsx)(N.a,{label:"Password",onChange:function(e){return v(e.target.value)},sx:{width:{xs:"90%",md:"25rem"}},type:"password"}),Object(U.jsx)(S.a,{disabled:0===i.length||0===k.length,onClick:g,variant:"contained",children:"Sign in"})]})}),Object(U.jsxs)(y.a,{sx:{justifyContent:"flex-end"},children:[Object(U.jsx)(w.a,{children:" dont have an account? "}),Object(U.jsxs)(S.a,{color:"primary",href:ie,children:[" ","Register"]})]})]}),Object(U.jsx)(l.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n,action:Object(U.jsx)(x.a,{onClick:function(){s(!1)},children:Object(U.jsx)(O.a,{color:"primary"})}),autoHideDuration:6e3,onClose:function(){s(!1)},message:"password or username is incorrect"})]})},ke=n(233),ve=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(),c=Object(u.a)(r,2),i=c[0],d=c[1],l=sessionStorage.getItem("activeUser");return Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(o.a.mark((function e(){var t,n,a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=13;break}return t=JSON.parse(l),e.next=4,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/user/list/").concat(t.name));case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,r=a.userDeskList,d(r[r.length-1]),(c=r.filter((function(e){return e.end_time>Date.now()/1e3}))).sort((function(e,t){return e.start_time>t.start_time?1:e.start_time<t.start_time?-1:0})),s(c);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[l]),Object(U.jsx)(b.a,{sx:{p:{xs:1,md:3},pt:{xs:3,md:3}},children:Object(U.jsxs)(f.a,{elevation:6,className:"basecard",sx:{width:{xs:"100%",md:"900px"}},children:[Object(U.jsx)(ue.a,{title:l?"bookings for ".concat(JSON.parse(l).name):"No user found",sx:{textAlign:"center"}}),Object(U.jsx)(p.a,{children:n.length<=0?"You haven't booked any desks":Object(U.jsxs)(C.a,{spacing:2,children:["This is your most recent booking:",Object(U.jsxs)(f.a,{sx:{width:{xs:"50%"}},children:[Object(U.jsx)(ue.a,{title:null===i||void 0===i?void 0:i.booked_desk}),Object(U.jsx)(p.a,{children:Object(U.jsx)(w.a,{variant:"caption",children:" From: ".concat(M(null===i||void 0===i?void 0:i.start_time)," Till: ").concat(M(null===i||void 0===i?void 0:i.end_time))})})]}),Object(U.jsx)(w.a,{gutterBottom:!0,children:"These are your booked desks:"}),Object(U.jsx)(be.a,{style:{maxHeight:400,overflow:"auto"},children:n.map((function(e){return Object(U.jsx)(le.a,{children:Object(U.jsx)(ke.a,{primary:e.booked_desk,secondary:" From: ".concat(M(e.start_time)," Till: ").concat(M(e.end_time))})},e.booking_id)}))})]})}),Object(U.jsxs)(y.a,{sx:{justifyContent:"space-between"},children:[n.length>0?Object(U.jsx)(S.a,{variant:"outlined",color:"secondary",href:"".concat(se,"?").concat(n[0].booked_desk),children:"checkin desk ".concat(n[0].booked_desk)}):"",Object(U.jsx)(S.a,{variant:"outlined",href:ae,children:"Make new booking"})]})]})})},ge=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(""),c=Object(u.a)(r,2),i=c[0],d=c[1],l=Object(a.useState)(""),x=Object(u.a)(l,2),h=x[0],O=x[1],m=function(){var e=Object(j.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i!==h){e.next=12;break}return e.next=3,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/createUser"),{method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({name:n,password:i,role:"user"})});case 3:return t=e.sent,e.next=6,t.json();case 6:if(!e.sent.isUserCreated){e.next=12;break}return a='{"name": "'.concat(n,'", "role": "user"}'),sessionStorage.setItem("activeUser",a),location.reload(),e.abrupt("return");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(U.jsx)(b.a,{sx:{p:{xs:1,md:3},pt:{xs:3,md:3}},children:Object(U.jsxs)(f.a,{elevation:6,className:"basecard",sx:{width:{xs:"100%",md:"900px"}},children:[Object(U.jsx)(ue.a,{title:"Register",sx:{textAlign:"center"}}),Object(U.jsx)(p.a,{children:Object(U.jsxs)(C.a,{alignItems:"center",spacing:4,children:[Object(U.jsx)(N.a,{label:"Email address",onChange:function(e){return s(e.target.value)},sx:{width:"25rem"}}),Object(U.jsx)(N.a,{label:"Password",onChange:function(e){return d(e.target.value)},sx:{width:"25rem"},type:"password"}),Object(U.jsx)(N.a,{label:"Confirm password",onChange:function(e){return O(e.target.value)},sx:{width:"25rem"},type:"password"}),Object(U.jsx)(S.a,{disabled:0===n.length||0===i.length||0===h.length,onClick:m,variant:"contained",children:"Register"})]})}),Object(U.jsxs)(y.a,{sx:{justifyContent:"flex-end"},children:[Object(U.jsx)(w.a,{children:" already an account? "}),Object(U.jsxs)(S.a,{color:"primary",href:ce,children:[" ","Log in"]})]})]})})},we=n(234),ye=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],s=t[1],r=Object(a.useContext)(P),c=Object(u.a)(r.sortVariant,1)[0];return Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/bookinglist"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,(a=n.bookingList).sort((function(e,t){switch(c){case"name":return e.user_name.localeCompare(t.user_name);case"nTime":return e.start_time>t.start_time?1:e.start_time<t.start_time?-1:0;case"fTime":return e.start_time<t.start_time?1:e.start_time>t.start_time?-1:0;default:return e.booked_desk.localeCompare(t.booked_desk)}})),s(a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[c]),Object(U.jsx)(be.a,{style:{height:"calc(100vh - 280px)",overflow:"auto"},children:n.map((function(e){return Object(U.jsx)(we.a,{children:Object(U.jsxs)(C.a,{children:[Object(U.jsxs)(w.a,{variant:"subtitle2",children:["Desk: ",e.booked_desk]}),Object(U.jsxs)(w.a,{variant:"body2",children:["User: ",e.user_name]}),Object(U.jsxs)(w.a,{variant:"body2",children:["From:",M(e.start_time)," - to:",M(e.end_time)]})]})},e.booking_id)}))})},Se=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],s=t[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/desk/list"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a=n.deskList,s(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(U.jsx)(be.a,{style:{height:"calc(100vh - 260px)",overflow:"auto"},children:n.map((function(e){return Object(U.jsx)(le.a,{children:Object(U.jsxs)(C.a,{children:[Object(U.jsxs)(w.a,{color:"free"===e.desk_state?"inherit":"red",variant:"subtitle2",children:["Desk: ",e.desk_id]}),Object(U.jsxs)(w.a,{color:"free"===e.desk_state?"inherit":"red",variant:"body2",children:["State: ",e.desk_state]})]})},e.desk_id)}))})},Ce=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],s=t[1],r={sortVariant:[n,s]};return Object(U.jsx)(P.Provider,{value:r,children:Object(U.jsxs)(m.a,{container:!0,spacing:5,padding:5,children:[Object(U.jsx)(m.a,{item:!0,xs:12,md:6,children:Object(U.jsxs)(f.a,{elevation:6,sx:{width:{xs:"100%",md:"900px"},minHeight:"calc(100vh - 170px)"},children:[Object(U.jsx)(ue.a,{title:"All bookings"}),Object(U.jsx)(p.a,{children:Object(U.jsx)(ye,{})}),Object(U.jsxs)(y.a,{sx:{justifyContent:"space-between"},children:[Object(U.jsx)(S.a,{variant:"outlined",onClick:function(){return s("name")},children:"Sort by name"}),Object(U.jsx)(S.a,{variant:"outlined",onClick:function(){return s("desk")},children:"Sort by desk"}),Object(U.jsx)(S.a,{variant:"outlined",onClick:function(){return s("nTime")},children:"Sort by nearest time"}),Object(U.jsx)(S.a,{variant:"outlined",onClick:function(){return s("fTime")},children:"Sort by furthest time"})]})]})}),Object(U.jsx)(m.a,{item:!0,xs:12,md:6,children:Object(U.jsxs)(f.a,{elevation:6,sx:{width:{xs:"100%",md:"900px"},minHeight:"calc(100vh - 130px)"},children:[Object(U.jsx)(ue.a,{title:"All desks"}),Object(U.jsx)(p.a,{children:Object(U.jsx)(Se,{})})]})})]})})},_e=n(267),Te=n(268),De=n(132),Ne=n(269),ze=n(130),Ie=n.n(ze),Le=n.p+"static/media/ordina_logo.7a9a0777.png",Pe=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],s=t[1],r=Boolean(n),c=sessionStorage.getItem("activeUser");return Object(U.jsxs)(_e.a,{position:"static",children:[Object(U.jsxs)(Te.a,{variant:"dense",sx:{gap:"10px"},children:[Object(U.jsx)("img",{src:Le,alt:"logo",style:{height:"2.5rem"}}),Object(U.jsx)(w.a,{variant:"h5",color:"inherit",component:"div",sx:{flexGrow:1,fontSize:{xs:"10px",md:"inherit"}},children:"Smart office management"}),c?Object(U.jsx)(w.a,{variant:"body1",children:JSON.parse(c).name}):"",Object(U.jsx)(x.a,{size:"large",color:"inherit",onClick:function(e){c&&s(e.currentTarget)},children:Object(U.jsx)(Ie.a,{})})]}),Object(U.jsxs)(De.a,{id:"user-menu",anchorEl:n,open:r,onClose:function(){s(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:[Object(U.jsx)(Z.a,{children:Object(U.jsx)(Ne.a,{href:re,children:"To account"})}),Object(U.jsx)(Z.a,{children:Object(U.jsx)(Ne.a,{href:ce,onClick:function(){s(null),sessionStorage.clear()},children:"Log out"})})]})]})},Ue=n(76),Be=n(235),He=n(131),Ee=Object(He.a)({palette:{primary:{main:"#f58220",light:"#e1e1e1",dark:"#c46819"},secondary:{main:"#007f92",light:"#3da4bf",dark:"#58595b"}}});n(171);var Ae=function(){var e=sessionStorage.getItem("activeUser"),t=e?JSON.parse(e):null,n=t&&"user"===t.role,s=t&&"admin"===t.role;return Notification.requestPermission().then((function(e){console.log(e)})),Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(o.a.mark((function e(){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=9;break}return e.next=3,fetch("".concat("https://ordina-smartdesk-api.azurewebsites.net/","api/user/notification/").concat(t.name));case 3:return a=e.sent,e.next=6,a.json();case 6:s=e.sent,console.log(s),s.notifications.length>0&&"granted"===window.Notification.permission&&new window.Notification(s.notifications.map((function(e){return e.message})).join(" "));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=setInterval((function(){e()}),1e4);return function(){clearInterval(a)}}),[n,t]),Object(U.jsx)("div",{className:"App",children:Object(U.jsx)(d.a,{theme:Ee,children:Object(U.jsxs)(Ue.a,{children:[Object(U.jsx)(Be.a,{}),Object(U.jsx)(Pe,{}),s&&Object(U.jsxs)(ne.d,{children:[Object(U.jsx)(ne.b,{path:oe,component:Ce}),Object(U.jsx)(ne.b,{children:Object(U.jsx)(ne.a,{to:oe})})]}),n&&Object(U.jsxs)(ne.d,{children:[Object(U.jsx)(ne.b,{path:ae,component:de}),Object(U.jsx)(ne.b,{path:se,component:pe}),Object(U.jsx)(ne.b,{path:re,component:ve}),Object(U.jsx)(ne.b,{children:Object(U.jsx)(ne.a,{to:re})})]}),!n&&!s&&Object(U.jsxs)(ne.d,{children:[Object(U.jsx)(ne.b,{path:ie,component:ge}),Object(U.jsx)(ne.b,{component:me})]})]})})})},Fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,270)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};c.a.render(Object(U.jsx)(s.a.StrictMode,{children:Object(U.jsx)(Ue.a,{children:Object(U.jsx)(Ae,{})})}),document.getElementById("root")),Fe()}},[[172,1,2]]]);
//# sourceMappingURL=main.8e082bc8.chunk.js.map